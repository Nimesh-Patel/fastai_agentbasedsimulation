

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Configuration file parameters &mdash; FastSTI 0.2.2 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Events" href="events.html" />
    <link rel="prev" title="Output file formats" href="outputformats.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> FastSTI
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getstart.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="guide.html">Tutorial: Creating simulations</a></li>
<li class="toctree-l1"><a class="reference internal" href="example.html">Interesting example</a></li>
<li class="toctree-l1"><a class="reference internal" href="inputformats.html">Input file formats</a></li>
<li class="toctree-l1"><a class="reference internal" href="outputformats.html">Output file formats</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Configuration file parameters</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#after-events">after_events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#age-alpha">age_alpha</a></li>
<li class="toctree-l2"><a class="reference internal" href="#age-beta">age_beta</a></li>
<li class="toctree-l2"><a class="reference internal" href="#age-input-time-step">age_input_time_step</a></li>
<li class="toctree-l2"><a class="reference internal" href="#age-max">age_max</a></li>
<li class="toctree-l2"><a class="reference internal" href="#age-min">age_min</a></li>
<li class="toctree-l2"><a class="reference internal" href="#agents-input-file">agents_input_file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#agents-output-file">agents_output_file</a></li>
<li class="toctree-l2"><a class="reference internal" href="#before-events">before_events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#birth-event-every-n">birth_event_every_n</a></li>
<li class="toctree-l2"><a class="reference internal" href="#birth-rate">birth_rate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#csv-delimiter">csv_delimiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-birth-infect">dataset_birth_infect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-birth-resistant">dataset_birth_resistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-birth-treated">dataset_birth_treated</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-coinfect">dataset_coinfect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-gen-infect">dataset_gen_infect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-gen-mating">dataset_gen_mating</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-gen-resistant">dataset_gen_resistant</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-gen-sex">dataset_gen_sex</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-gen-sex-preferred">dataset_gen_sex_preferred</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-gen-treated">dataset_gen_treated</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-infect">dataset_infect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-infect-stage">dataset_infect_stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-mortality">dataset_mortality</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-rel-period">dataset_rel_period</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dataset-single-period">dataset_single_period</a></li>
<li class="toctree-l2"><a class="reference internal" href="#during-events">during_events</a></li>
<li class="toctree-l2"><a class="reference internal" href="#report-frequency">report_frequency</a></li>
<li class="toctree-l2"><a class="reference internal" href="#initial-infect-stage">initial_infect_stage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#match-k">match_k</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="events.html">Events</a></li>
<li class="toctree-l1"><a class="reference internal" href="extending.html">Extending FastSTI</a></li>
<li class="toctree-l1"><a class="reference internal" href="improve.html">Help improve FastSTI</a></li>
<li class="toctree-l1"><a class="reference internal" href="improve.html#bugs-and-other-issues">Bugs and other issues</a></li>
<li class="toctree-l1"><a class="reference internal" href="refs.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="credits.html">Credits</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">FastSTI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Configuration file parameters</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/parameters.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="configuration-file-parameters">
<span id="parameter-ref"></span><h1>Configuration file parameters<a class="headerlink" href="#configuration-file-parameters" title="Permalink to this headline">¶</a></h1>
<p>To see the list of configuration file parameters, along with a description and
the value for each, run:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">faststi</span> <span class="o">-</span><span class="n">p</span>
</pre></div>
</div>
<p>This prints out the parameters in a
logical order. Here is an alphabetically arranged reference guide to the
parameters:</p>
<div class="section" id="after-events">
<span id="after-events-ref"></span><h2>after_events<a class="headerlink" href="#after-events" title="Permalink to this headline">¶</a></h2>
<p>These are the events executed after a simulation starts.</p>
<p>Default value: _no_op</p>
<p>Events used in: None</p>
<p>Examples::</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">after_events</span> <span class="o">=</span> <span class="n">_write_agents_csv</span><span class="p">;</span><span class="n">_report</span>

<span class="n">after_events</span> <span class="o">=</span> <span class="n">_no_op</span> <span class="c1"># No events are executed after the simulation (default)</span>
</pre></div>
</div>
</div>
<div class="section" id="age-alpha">
<h2>age_alpha<a class="headerlink" href="#age-alpha" title="Permalink to this headline">¶</a></h2>
<p>If instead of reading in an agent file, the agents are generated with the
<a class="reference internal" href="events.html#generate-agents-ref"><span class="std std-ref">_generate_agents</span></a> event, then the initial age of each agent is drawn a
random alpha-beta distribution. This is the alpha parameter.</p>
<p>Default value: 0.3</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">age_alpha</span> <span class="o">=</span> <span class="mf">0.5</span>
</pre></div>
</div>
</div>
<div class="section" id="age-beta">
<h2>age_beta<a class="headerlink" href="#age-beta" title="Permalink to this headline">¶</a></h2>
<p>If instead of reading in an agent file, the agents are generated with the
<a class="reference internal" href="events.html#generate-agents-ref"><span class="std std-ref">_generate_agents</span></a> event, then the initial age of each agent is drawn a
random alpha-beta distribution. This is the beta parameter.</p>
<p>Default: 1.0</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
</div>
<div class="section" id="age-input-time-step">
<h2>age_input_time_step<a class="headerlink" href="#age-input-time-step" title="Permalink to this headline">¶</a></h2>
<p>Denomination of agent ages used in input files. This is typically either a year
or 5-year age groups.</p>
<p>Default: 1 year (525949 minutes)</p>
<p>Events used in: _read_agents</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">age_input_time_step</span> <span class="o">=</span> <span class="mi">525949</span>

<span class="n">age_input_time_step</span> <span class="o">=</span> <span class="n">YEAR</span>

<span class="n">age_input_time_step</span> <span class="o">=</span> <span class="mi">5</span> <span class="n">YEARS</span>
</pre></div>
</div>
</div>
<div class="section" id="age-max">
<h2>age_max<a class="headerlink" href="#age-max" title="Permalink to this headline">¶</a></h2>
<p>Oldest age that a generated agent at the beginning of a simulation can be
initialized to.</p>
<p>Default: 50 years (26297450 minutes)</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">age_max</span> <span class="o">=</span> <span class="mi">26297450</span>

<span class="n">age_max</span> <span class="o">=</span> <span class="mi">50</span> <span class="n">YEARS</span>
</pre></div>
</div>
</div>
<div class="section" id="age-min">
<h2>age_min<a class="headerlink" href="#age-min" title="Permalink to this headline">¶</a></h2>
<p>Youngest age that a generated agent at the beginning of a simulation can be
initialized to.</p>
<p>Default: 15 years (7889235 minutes)</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">age_max</span> <span class="o">=</span> <span class="mi">26297450</span>

<span class="n">age_max</span> <span class="o">=</span> <span class="mi">50</span> <span class="n">YEARS</span>
</pre></div>
</div>
</div>
<div class="section" id="agents-input-file">
<h2>agents_input_file<a class="headerlink" href="#agents-input-file" title="Permalink to this headline">¶</a></h2>
<p>Name of the csv file to read agents from. Use empty string for standard input.</p>
<p>Default: agents_in.csv</p>
<p>Events used in: _read_agents</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">agents_input_file</span> <span class="o">=</span> <span class="n">agents_in</span><span class="o">.</span><span class="n">csv</span>

<span class="n">agents_input_file</span> <span class="o">=</span> <span class="n">stdin</span> <span class="c1"># Reads agents from standard input</span>
</pre></div>
</div>
</div>
<div class="section" id="agents-output-file">
<h2>agents_output_file<a class="headerlink" href="#agents-output-file" title="Permalink to this headline">¶</a></h2>
<p>Name of the csv file to write agents to. Use empty string for standard output.</p>
<p>Events used in: _write_agents_csv_header, _write_agents_csv,
_write_living_agents_csv, _write_dead_agents_csv</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">agents_output_file</span> <span class="o">=</span> <span class="n">agents_out</span><span class="o">.</span><span class="n">csv</span>

<span class="n">agents_output_file</span> <span class="o">=</span> <span class="n">stdout</span> <span class="c1"># Writes agents to standard output</span>
</pre></div>
</div>
</div>
<div class="section" id="before-events">
<span id="before-events-ref"></span><h2>before_events<a class="headerlink" href="#before-events" title="Permalink to this headline">¶</a></h2>
<p>These are the events executed before a simulation starts.</p>
<p>Default: _no_op</p>
<p>Events used in: None</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">before_events</span> <span class="o">=</span> <span class="n">_write_agents_csv_header</span><span class="p">;</span><span class="n">_write_results_csv_header</span><span class="p">;</span><span class="n">_generate_and_pair</span>

<span class="n">before_events</span> <span class="o">=</span> <span class="n">_no_op</span> <span class="c1"># No events are executed after the simulation (default)</span>
</pre></div>
</div>
</div>
<div class="section" id="birth-event-every-n">
<h2>birth_event_every_n<a class="headerlink" href="#birth-event-every-n" title="Permalink to this headline">¶</a></h2>
<p>Indicates how frequently (i.e. every nth iteration) the birth (_birth) event is executed.</p>
<p>The birth event creates new agents during the simulation. Each new agent is set
to the minimum age. Because the number of agents might be too small for their to
be births on every iteration, this parameter allows you to execute the births at
specified iterations.</p>
<p>Also, births are discrete. There can only be a whole number of births executed
by the _birth event. Even if births can take place daily, rounding the expected
number of births to a whole number may create a severely inaccurate birth
rate. Therefore it may be better to execute the _birth event infrequently but
with more births taking place each time it executes, in order to reduce the
difference between the births generated by the model and the births in the
real-world population being studied.</p>
<p>Default: 73 (i.e. every 73rd iteration - by default this would be every
73rd day of the simulation)</p>
<p>Of course if your simulation doesn’t use the _birth event, this parameter is irrelevant.</p>
<p>Events used in: _birth</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">birth_event_every_n</span> <span class="o">=</span> <span class="mi">73</span>
</pre></div>
</div>
</div>
<div class="section" id="birth-rate">
<h2>birth_rate<a class="headerlink" href="#birth-rate" title="Permalink to this headline">¶</a></h2>
<p>Birth rate for the period of birth_event_every_n</p>
<p>Events used in: _birth</p>
<p>Default: 0.003968</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">birth_rate</span> <span class="o">=</span> <span class="mf">0.002</span>
</pre></div>
</div>
</div>
<div class="section" id="csv-delimiter">
<h2>csv_delimiter<a class="headerlink" href="#csv-delimiter" title="Permalink to this headline">¶</a></h2>
<p>Character that separates CSV fields</p>
<p>Events used in: any event that reads or writes a CSV file.</p>
<p>Default value: ;</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">csv_delimiter</span> <span class="o">=</span> <span class="p">,</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It’s not currently possible to set the csv_delimiter in the
configuration file to a semi-colon (;) because this is the delimiter
for the configuration file itself. But the default value for
csv_delimiter is the semi-colon, so it should be unnecessary to have
to set it to anything other than a comma.</p>
</div>
</div>
<div class="section" id="dataset-birth-infect">
<h2>dataset_birth_infect<a class="headerlink" href="#dataset-birth-infect" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the infection stage of agents,
if any, when they enter the simulation (when agents are born, so to speak,
although since they are born at the minimum age of the simulation, e.g. 15 years
old, they may already be sexually active).</p>
<p>See the data/dataset_birth_infect.csv file for an example of this dataset.</p>
<p>In this example file, the the agent characteristics of sex, sex_preferred and
age (in 10-year groupings) are used to determine probability of an agent being
uninfected (i.e. agent-&gt;infected is set to 0), or stage 1, 2, 3 or 4. Note the
probabilities are ascending from stage 1 through 4. The _birth event first
checks if a uniform random number, r, is &lt; than the stage 1 probability. If it
is, agent-&gt;infected is set to 1. Then it checks if r is &lt; than the stage 2
probability and &gt;= the stage 1 probability. If it is, agent-&gt;infected is set
to 2. Etc. If r is &gt;= the stage 4 probability, the agent is uninfected and
agent-&gt;infected is set to 0. Your simulation can have many stages (up to 254,
but this would almost certainly be unmanageable), so long as they are
consistently treated across datasets.</p>
<p>Events used in: _birth</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_birth_infect</span> <span class="o">=</span> <span class="n">dataset_birth_infect</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-birth-resistant">
<h2>dataset_birth_resistant<a class="headerlink" href="#dataset-birth-resistant" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the resistance of infected
agents, if any, when they enter the simulation (when agents are born, so to
speak, although since they are born at the minimum age of the simulation,
e.g. 15 years old, they may already be sexually active). The file can have any
number of columns specifying agent characteristics (independent variables). It
must have exactly one dependent variable column specifying the risk of
resistance for agents with a given set of characteristics.</p>
<p>See the data/dataset_birth_resistant.csv file for an example of this dataset.</p>
<p>Events used in: _birth</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_birth_resistant</span> <span class="o">=</span> <span class="n">dataset_birth_resistant</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This mechanism for modelling resistance at birth is a bit too simple
and needs to be improved.</p>
</div>
</div>
<div class="section" id="dataset-birth-treated">
<h2>dataset_birth_treated<a class="headerlink" href="#dataset-birth-treated" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the probability of an infected
agent being on treatment when they enter the simulation (when agents are born,
so to speak, although since they are born at the minimum age of the simulation,
e.g. 15 years old, they may already be sexually active). The file can have any
number of columns specifying agent characteristics (independent variables). It
must have exactly one dependent variable column specifying the probability of
treatment for agents with a given set of characteristics</p>
<p>See the data/dataset_birth_treated.csv file for an example of this dataset.</p>
<p>Events used in: _birth</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_birth_treated</span> <span class="o">=</span> <span class="n">dataset_birth_treated</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-coinfect">
<h2>dataset_coinfect<a class="headerlink" href="#dataset-coinfect" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the coinfection status of an
agent. You can have as many columns specifying agent characteristics (i.e. the
independent variables) as you wish but the _coinfect event expects exactly one
dependent variable, the probability of the agent being coinfected per time step.</p>
<p>See the data/dataset_coinfect.csv file for an example of this dataset.</p>
<p>Events used in: _coinfect</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_coinfect</span> <span class="o">=</span> <span class="n">dataset_coinfect</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-gen-infect">
<h2>dataset_gen_infect<a class="headerlink" href="#dataset-gen-infect" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the infection stage of agents,
if any, at the beginning of a simulation.</p>
<p>See the data/dataset_gen_infect.csv file for an example of this dataset.</p>
<p>In this example file, the agent characteristics of sex, sex_preferred and age
(in 10-year groupings) are used to determine probability of an agent being
uninfected (i.e. agent-&gt;infected is set to 0), or stage 1, 2, 3 or 4. Note the
probabilities are ascending from stage 1 through 4. The _birth event first
checks if a uniform random number, r, is &lt; than the stage 1 probability. If it
is, agent-&gt;infected is set to 1. Then it checks if r is &lt; than the stage 2
probability and &gt;= the stage 1 probability. If it is, agent-&gt;infected is set
to 2. Etc. If r is &gt;= the stage 4 probability, the agent is uninfected and
agent-&gt;infected is set to 0. Your simulation can have many stages (up to 254,
but this would almost certainly be unmanageable), so long as they are
consistently treated across datasets.</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_infect</span> <span class="o">=</span> <span class="n">dataset_gen_infect</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-gen-mating">
<h2>dataset_gen_mating<a class="headerlink" href="#dataset-gen-mating" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the probability of an agent
being in the mating pool at the beginning of a simulation. You can have as many
columns specifying agent characteristics (i.e. the independent variables) as you
wish but the events that use this dataset expect exactly one dependent variable,
the probability of the agent being in the initial mating pool.</p>
<p>See the data/dataset_gen_mating.csv file for an example of this dataset.</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_mating</span> <span class="o">=</span> <span class="n">dataset_gen_mating</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-gen-resistant">
<h2>dataset_gen_resistant<a class="headerlink" href="#dataset-gen-resistant" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the resistance of infected
agents, if any, at the beginning of a simulation. The file can have any
number of columns specifying agent characteristics (independent variables). It
must have exactly one dependent variable column specifying the risk of
resistance for agents with a given set of characteristics.</p>
<p>See the data/dataset_gen_resistant.csv file for an example of this dataset.</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_resistant</span> <span class="o">=</span> <span class="n">dataset_gen_resistant</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This mechanism for modelling resistance is a bit too simple
and needs to be improved.</p>
</div>
</div>
<div class="section" id="dataset-gen-sex">
<h2>dataset_gen_sex<a class="headerlink" href="#dataset-gen-sex" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the sex of an agent at the
beginning of a simulation. The file can have zero or more columns specifying
agent characteristics (independent variables). It must have exactly one
dependent variable column specifying the probability of the agent being
male. Typically this is a one-column dataset with a header and one data row set
to 0.5. But if you want need more sophisticated initiation of agent sex (e.g. by
age), then this is the dataset in which you specify it.</p>
<p>See the data/dataset_gen_sex.csv file for an example of this dataset.</p>
<p>Events used in: _generate_agents, _generate_and_pair</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_sex</span> <span class="o">=</span> <span class="n">dataset_gen_sex</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-gen-sex-preferred">
<h2>dataset_gen_sex_preferred<a class="headerlink" href="#dataset-gen-sex-preferred" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the sexual preference of an
agent at the beginning of a simulation. The file can have zero or more columns
specifying agent characteristics (independent variables). It must have exactly
one dependent variable column specifying the probability of the agent preferring
a male sexual partner.</p>
<p>See the data/dataset_gen_sex_preferred.csv file for an example of this
dataset.</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_sex_preferred</span> <span class="o">=</span> <span class="n">dataset_gen_sex_preferred</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-gen-treated">
<h2>dataset_gen_treated<a class="headerlink" href="#dataset-gen-treated" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to set the treatment status of an
infected agent at the beginning of a simulation. The file can have zero or more
columns specifying agent characteristics (independent variables). The number of
dependent variable columns must correspond to the number of possible treatment
statuses, incrementing from 1. Events that use this dataset generate a uniform
random number, r, and then compare r from the first dependent column onwards. If
r is less than the probability in a dependent column, the agent’s treatment
status is set to the dependent column number.</p>
<p>Here’s a mixture of C and pseudocode showing how FastSTI does this:</p>
<blockquote>
<div><div class="highlight-C notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="n">num_stages</span> <span class="o">=</span> <span class="n">simulation</span><span class="o">-&gt;</span><span class="n">dataset_gen_treated</span><span class="o">-&gt;</span><span class="n">num_dependents</span><span class="p">;</span>
 <span class="n">rnd</span> <span class="o">=</span> <span class="n">uniform</span> <span class="n">random</span> <span class="n">number</span><span class="p">;</span>
 <span class="n">agent</span><span class="o">-&gt;</span><span class="n">treated</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
 <span class="n">row</span> <span class="o">=</span> <span class="n">fsti_dataset_lookup_row</span><span class="p">(</span><span class="n">dataset_gen_treated</span><span class="p">,</span> <span class="n">agent</span><span class="p">);</span>
 <span class="k">for</span> <span class="p">(</span><span class="n">col</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">col</span> <span class="o">&lt;=</span> <span class="n">num_stages</span><span class="p">;</span> <span class="n">col</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
     <span class="n">prob</span> <span class="o">=</span> <span class="n">dataset_get</span><span class="p">(</span><span class="n">dataset_gen_treated</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">col</span><span class="p">);</span>
     <span class="k">if</span> <span class="p">(</span><span class="n">rnd</span> <span class="o">&lt;</span> <span class="n">prob</span><span class="p">)</span> <span class="p">{</span>
         <span class="n">agent</span><span class="o">-&gt;</span><span class="n">treated</span> <span class="o">=</span> <span class="n">col</span><span class="p">;</span>
         <span class="k">break</span><span class="p">;</span>
     <span class="p">}</span>
 <span class="p">}</span>
</pre></div>
</td></tr></table></div>
</div></blockquote>
<p>See the data/dataset_gen_treated.csv file for an example of this
dataset.</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_treated</span> <span class="o">=</span> <span class="n">dataset_gen_sex_treated</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-infect">
<h2>dataset_infect<a class="headerlink" href="#dataset-infect" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to determine whether an agent becomes
infected by its sexual partner. This is a two-agent dataset, since the
probability of infection is a function of the characteristics of both
agents. See <a class="reference internal" href="inputformats.html#two-agent-dataset-ref"><span class="std std-ref">Two-agent datasets</span></a> for details on how this works.</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_infect</span> <span class="o">=</span> <span class="n">dataset_gen_infect</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-infect-stage">
<span id="dataset-infect-stage-ref"></span><h2>dataset_infect_stage<a class="headerlink" href="#dataset-infect-stage" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to determine if an infected agent
should change the infection stage it is in.</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_gen_infect</span> <span class="o">=</span> <span class="n">dataset_gen_infect</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
<p>This is quite a complicated dataset and is best understood by looking at the
commented example in the data directory called dataset_infect_stage.csv. For
convenience here it is:</p>
<div class="highlight-none notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77</pre></div></td><td class="code"><div class="highlight"><pre><span></span>     # Dataset used by _stage event (defined in fsti-events.c as fsti_event_stage)
     #
     # The first three columns are used for matching and correspond to agent fields
     # or properties.
     #
     # The next six columns are instructions on how and when to change the stage.
     #
     # Columns:
     #
     #  1. infected - the infection stage of the agent (0 is uninfected)
     #  2. treated - the treatment regimen of the agent. This particular file
     #               allows for 3 treatment regimens.
     #  3. resistant - 0 if the agent is drug-susceptible to this treatment regimen
     #                 1 if the agent is drug-resistant to this treatment regimen
     #  4. prob_stage_change - probability that the infection stage changes for
     #                         this time step (1 day)
     #  5. stage_incr - if a uniformly generated random number &lt; prob_stage_change
     #                  then change the infect property by this increment
     #  6. prob_treatment_change - probability treatment changes
     #  7. treatment_incr - if a uniformly rand number &lt; prob_treatment_change
     #                      then change the treatment property by this increment
     #  8. prob_resistant - probability resistance status changes
     #  9. resistant_incr - if a uniformly random number &lt; prob_resistant_change
     #                      change the resistant value by this amount
     #
     # Note the |6 after resistant_incr means that there are six columns at the end
     # of each line that are not agent properties.
     #
     # Infection stages:;;;;;;;;
     #  0 = uninfected;;;;;;;;
     #  1 = virally suppressed (usually on treatment);;;;;;;;
     #  2 = primary infection (highly infectious);;;;;;;;
     #  3 = chronic infection;;;;;;;;
     #  4 = Final stage;;;;;;;;
     #
     # HEADER ROW FOLLOWS
     infected;treated;resistant;prob_stage_change;stage_incr;prob_treatment_change;treatment_incr;prob_resistant;resistant_incr|6
     0;0;0;0;0;0;0;0;0
     0;0;1;0;0;0;0;0;0
     0;1;0;0;0;0;0;0;0
     0;1;1;0;0;0;0;0;0
     0;2;0;0;0;0;0;0;0
     0;2;1;0;0;0;0;0;0
     0;3;0;0;0;0;0;0;0
     0;3;1;0;0;0;0;0;0
     1;0;0;0.1;1;0.0001;1;0;0
     1;0;1;0.1;1;0.0001;1;0;0
     1;1;0;0.00001;1;0.00001;1;0.00001;1
     1;1;1;0.1;1;0.0001;1;0;0
     1;2;0;0.00001;1;0.00001;1;0.00001;1
     1;2;1;0.1;1;0.0001;1;0;0
     1;3;0;0.00001;1;0;0;0.0001;1
     1;3;1;0.1;1;0;0;0;0
     2;0;0;0.1;1;0.001;1;0;0
     2;0;1;0.1;1;0.001;1;0;0
     2;1;0;0.1;-1;0;0;0.0001;1
     2;1;1;0.1;1;0.001;1;0;0
     2;2;0;0.1;-1;0;0;0.0001;1
     2;2;1;0.1;1;0.001;1;0;0
     2;3;0;0.1;-1;0;0;0.0001;1
     2;3;1;0.1;1;0;0;0;0
     3;0;0;0.004;1;0.0001;1;0;0
     3;0;1;0.001;1;0.0001;1;0;0
     3;1;0;0.1;-1;0;0;0.0001;1
     3;1;1;0.002;1;0.005;1;0;0
     3;2;0;0.1;-1;0;0;0.0001;1
     3;2;1;0.002;1;0.001;1;0;0
     3;3;0;0.1;-1;0;0;0.0001;1
     3;3;1;0.002;1;0;0;0;0
     4;0;0;0;0;0.005;1;0;0
     4;0;1;0;0;0.005;1;0;0
     4;1;0;0.1;-1;0;0;0.0001;1
     4;1;1;0;0;0.01;1;0;0
     4;2;0;0.1;-1;0;0;0.0001;1
     4;2;1;0;0;0.01;1;0;0
     4;3;0;0.1;-1;0;0;0.0001;1
     4;3;1;0;0;0;0;0;0
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="dataset-mortality">
<h2>dataset_mortality<a class="headerlink" href="#dataset-mortality" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to determine if an agent should die on
the current time step.</p>
<p>See the data/dataset_mortality.csv file for an example of this dataset.</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_mortality</span> <span class="o">=</span> <span class="n">dataset_mortality</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-rel-period">
<h2>dataset_rel_period<a class="headerlink" href="#dataset-rel-period" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to determine the length of time an
agent relationship should be.</p>
<p>This dataset requires two dependent variable columns: scale and shape, which are
used to draw a random number from a Weibull distribution for each agent in the
relationship. The values returned are the number of time steps (iterations). The
duration of the relationship is the mean of the two random numbers drawn.</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_rel_period</span> <span class="o">=</span> <span class="n">dataset_rel_period</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="dataset-single-period">
<h2>dataset_single_period<a class="headerlink" href="#dataset-single-period" title="Permalink to this headline">¶</a></h2>
<p>Specifies the location of a dataset used to determine the length of time an
agent should remain single.</p>
<p>This dataset requires two dependent variable columns: scale and shape, which are
used to draw a random number from a Weibull distribution for the agent. The
value drawn is the number of time steps the agent should remain single.</p>
<p>Default: _no_op # i.e. there is no dataset file specified.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">dataset_single_period</span> <span class="o">=</span> <span class="n">dataset_single_period</span><span class="o">.</span><span class="n">csv</span>
</pre></div>
</div>
</div>
<div class="section" id="during-events">
<span id="during-events-ref"></span><h2>during_events<a class="headerlink" href="#during-events" title="Permalink to this headline">¶</a></h2>
<p>These are the events executed on every time step of a simulation.</p>
<p>Default: _no_op</p>
<p>Events used in: None</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">during_events</span><span class="o">=</span><span class="n">_age</span><span class="p">;</span><span class="n">_breakup_and_pair</span><span class="p">;</span><span class="n">_infect</span><span class="p">;</span><span class="n">_stage</span><span class="p">;</span><span class="n">_birth</span><span class="p">;</span><span class="n">_death</span>

<span class="n">during_events</span> <span class="o">=</span> <span class="n">_no_op</span> <span class="c1"># No events are executed during the simulation (default)</span>
</pre></div>
</div>
</div>
<div class="section" id="report-frequency">
<span id="report-frequency-ref"></span><h2>report_frequency<a class="headerlink" href="#report-frequency" title="Permalink to this headline">¶</a></h2>
<p>Indicates the frequency that the reporting events specified by the during_events
parameter should be specified.</p>
<p>Default: 1, i.e. on every iteration or time step of the simulation. Make sure
this is what you really want. If you’re executing <a class="reference internal" href="events.html#write-agents-csv-ref"><span class="std std-ref">_write_agents_csv</span></a>
during the simulation, having a report_frequency of 1 will slow your simulation
down and use huge amounts of hard drive space.</p>
<p>Events used in: _write_agents_csv, _write_live_agents_csv,
_write_dead_agents_csv, _report</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">report_frequency</span> <span class="o">=</span> <span class="mi">365</span> <span class="c1"># Report every 365 time steps.</span>
</pre></div>
</div>
</div>
<div class="section" id="initial-infect-stage">
<h2>initial_infect_stage<a class="headerlink" href="#initial-infect-stage" title="Permalink to this headline">¶</a></h2>
<p>When an agent is infected, this parameter determines the initial infection
stage.</p>
<p>Default: 2. In the default simulation provided by FastSTI, the agent infected
property of 1 implies it is on treatment. No one is on treatment when infected,
so 2 represents the primary infection stage, and this is therefore the default
value that initial_infect_stage is set to.</p>
<p>Events used in: _infect</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">initial_infect_stage</span> <span class="o">=</span> <span class="mi">2</span>
</pre></div>
</div>
</div>
<div class="section" id="match-k">
<h2>match_k<a class="headerlink" href="#match-k" title="Permalink to this headline">¶</a></h2>
<p>The value of k when using nearest-neighbour type agent matching algorithms. The
agent matching algorithm supplied with GroundUp (implemented by the
<a class="reference internal" href="events.html#rkpm-ref"><span class="std std-ref">_rkpm</span></a> event) chooses the best match for the current agent being
considered for matching in the mating pool from the k unmatched agents adjacent
to it.</p>
<p>If k is set to 1, this is random matching matching. If k is set larger than the
possible number of agents in the mating pool, then this is a kind of brute force
matching.</p>
<p>Default: 100 This is usually a good compromise value. The algorithm will execute
quickly and the agent selected will on average be a better match than 99% of the
remaining agents in the mating pool.</p>
<p>Events used in: _rpkm</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">match_k</span> <span class="o">=</span> <span class="mi">300</span>
</pre></div>
</div>
<p>TO DO</p>
<p>max_stage; Maximum infection stage (e.g. 6 for HIV 1=virally suppressed, 2=primary 3-6=WHO 1-4); 6</p>
<p>mutual_csv_partners; After initializing agents, make all partnerships mutual; 1</p>
<p>num_agents; Number of agents; 20000</p>
<p>num_simulations; Number of simulations to execute (default is 1); 1</p>
<p>partnerships_file; File name to output partnerships (empty string for stdout);</p>
<p>prob_birth_infected_msm; Probability a new msm agent is infected; 0.001000</p>
<p>prob_birth_infected_msw; Probability a new msw agent is infected; 0.000100</p>
<p>prob_birth_infected_wsm; Probability a new wsm agent is infected; 0.000500</p>
<p>prob_birth_infected_wsw; Probability a new wsw agent is infected; 0.000100</p>
<p>prob_birth_male; Probability a new agent is male; 0.500000</p>
<p>prob_birth_msw; Probability a new male agent is msw; 0.950000</p>
<p>prob_birth_wsm; Probability a new female agent is wsm; 0.950000</p>
<p>prob_gen_male; Probability a generated agent is male; 0.500000</p>
<p>prob_gen_msw; Probability a generated male agent is msw; 0.950000</p>
<p>prob_gen_wsm; Probability a generated female agent is wsm; 0.950000</p>
<p>record_breakups; Whether to output breakups to the partnership file; 0</p>
<p>record_infections; Whether to output infections to the partnership file; 0</p>
<p>record_matches; Whether to output matches to the partnership file; 0</p>
<p>results_file; File name to output results to (empty string for stdout);</p>
<p>simulation_period; Time period of the simulation (10 years); 5259490</p>
<p>stabilization_events; Events used to stabilize the agent characteristics before
the actual simulation; _no_op</p>
<p>stabilization_steps; Number of time steps to run before executing various events; 0</p>
<p>start_date; Start date of simulation (yyyy;mm;dd); 2018; 1; 1</p>
<p>threads; Number of threads (0=system determined); 0</p>
<p>time_step; Time step for each iteration of simulation in minutes(default 1440 minutes == 1 day); 1440</p>
<p>treatment_infect_stage; When treated this is the integer to set infected to; 1</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="events.html" class="btn btn-neutral float-right" title="Events" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="outputformats.html" class="btn btn-neutral float-left" title="Output file formats" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Nathan Geffen and Stefan Scholz

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>